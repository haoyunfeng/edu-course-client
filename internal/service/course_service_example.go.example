package service

// 这是一个示例文件，展示如何根据实际的 protobuf 定义来使用类型
// 当您知道 edu-course-proto 中的具体定义后，可以按照以下方式调整代码：

/*
import (
	"context"
	"fmt"

	coursepb "github.com/haoyunfeng/edu-course-proto/pb" // 实际导入路径
	"github.com/haoyunfeng/edu-course-client/internal/config"
	"go-micro.dev/v4"
	"go-micro.dev/v4/client"
	"go-micro.dev/v4/registry"
	"go-micro.dev/v4/registry/mdns"
)

type CourseService struct {
	courseClient coursepb.CourseServiceClient // 使用 protobuf 生成的客户端
	cfg          *config.Config
}

func NewCourseService(cfg *config.Config) (*CourseService, error) {
	service := micro.NewService(
		micro.Name("edu.course.client"),
	)

	var reg registry.Registry
	switch cfg.Micro.Registry {
	case "mdns":
		reg = mdns.NewRegistry()
	default:
		reg = mdns.NewRegistry()
	}

	service.Init(
		micro.Registry(reg),
	)

	// 注意：go-micro 使用 client.Call 方式调用，而不是直接使用 gRPC 客户端
	// 实际实现请参考 course_service.go

	return &CourseService{
		courseClient: courseClient,
		cfg:          cfg,
	}, nil
}

// GetCourse 使用 protobuf 类型
// 注意：Id 字段是 int64 类型
func (s *CourseService) GetCourse(ctx context.Context, courseID int64) (*coursepb.GetCourseResponse, error) {
	req := &coursepb.GetCourseRequest{
		Id: courseID,
	}

	// 使用 go-micro client.Call 方式调用
	// 实际实现请参考 course_service.go
	resp, err := s.courseClient.GetCourse(ctx, req)
	if err != nil {
		return nil, fmt.Errorf("failed to call course service: %w", err)
	}

	return resp, nil
}

// GetAllCourses 使用 protobuf 类型
func (s *CourseService) GetAllCourses(ctx context.Context) (*coursepb.GetAllCoursesResponse, error) {
	req := &coursepb.GetAllCoursesRequest{}

	resp, err := s.courseClient.GetAllCourses(ctx, req)
	if err != nil {
		return nil, fmt.Errorf("failed to call course service: %w", err)
	}

	return resp, nil
}
*/
